<MainGrid>
    cols: 1
    is_running: False
    work_time: 25*60
    rest_time: 5 *60
    long_rest_time: 30*60
    original_times: [25*60, 5*60, 30*60]
    end_time: 0
    faze_counter: 0
    curent_faze: ''
    is_working: True
    clock_event: None
    Label:
        id: status
        text: 'Work Timer'
        font_size: 30
        size_hint: 1, 0.1
    Label:
        id: timer
        text: "%02d" % (root.work_time // 60) + ':' + "%02d" % (root.work_time % 60)
        font_size: 75
        size_hint: 1, 0.5
    GridLayout:
        cols: 3
        size_hint: 1, 0.1
        Button:
            text: 'Config'
            on_press: root.open_config()
        Button:
            text: 'Reset'
            on_press: root.reset_timer()
        Button:
            text: 'Start'
            id: start_stop
            on_press: root.start_stop_timer()

<Config_popup>
    title: 'Timer Config'
    size_hint: 0.5, 0.5
    auto_dismiss: False
    work_time: 0
    rest_time: 0
    long_rest_time: 0
    caller: None
    GridLayout:
        cols: 1
        Label:
            text: 'Settings'
            font_size: 30
            size_hint: (1, 0.5)
        GridLayout:
            cols: 2
            size_hint: (1, 0.9)
            Label:
                text: 'Work Time:'
            TextInput:
                id: work_time
                text: str(root.work_time // 60)
                multiline: False
                input_filter: 'int'
            Label:
                text: 'Pause Time:'
            TextInput:
                id: rest_time
                text: str(root.rest_time // 60)
                multiline: False
                input_filter: 'int'
            Label:
                text: 'End Pause Time:'
            TextInput:
                id: long_rest_time
                text: str(root.long_rest_time // 60)
                multiline: False
                input_filter: 'int'
        GridLayout:
            cols: 2
            size_hint: (1, 0.5)
            Button:
                text: 'Cancel'
                on_press: root.dismiss()
            Button:
                text: 'Save'
                on_press: root.save_config(root.ids.work_time.text, root.ids.rest_time.text, root.ids.long_rest_time.text, root.caller)